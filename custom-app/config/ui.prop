preferredLabels = { ?subject a crm:E21_Person ; crm:P1_is_identified_by ?appellation . ?appellation crm:P2_has_type <https://sk.acdh.oeaw.ac.at/types/person/persName/pref> ; rdf:value ?value .},{\n    ?subject a frbroo:F22_Self-Contained_Expression; \n             crm:P165i_is_incorporated_in ?issueF22 .\n    ?issueF22 crm:P165i_is_incorporated_in ?issueF24 .\n    ?issueF24 frbroo:R5i_is_component_of ?periodical ;\n              crm:P1_is_identified_by ?app .\n    ?app a crm:E33_E41_Linguistic_Appellation .\n    OPTIONAL {\n        ?app crm:P106_is_composed_of ?a . \n        ?a crm:P2_has_type <https://sk.acdh.oeaw.ac.at/types/appellation/title/main> ;\n                  rdf:value ?appTitle. \n    }\n    OPTIONAL {\n        ?app crm:P106_is_composed_of ?b . \n        ?b crm:P2_has_type <https://sk.acdh.oeaw.ac.at/types/appellation/date> ;\n              rdf:value ?bVal .\n    \tBIND(CONCAT("\\, "\\, ?bVal) AS ?appDate)\n    }\n    OPTIONAL {\n        ?app crm:P106_is_composed_of ?c . \n        ?c crm:P2_has_type <https://sk.acdh.oeaw.ac.at/types/appellation/num/issue> ;\n                  rdf:value ?cVal .\n        BIND(CONCAT("\\, "\\, ?cVal) AS ?appIssue)\n    }\n      OPTIONAL {\n        ?app crm:P106_is_composed_of ?d . \n        ?d crm:P2_has_type <https://sk.acdh.oeaw.ac.at/types/appellation/num/volume> ;\n                  rdf:value ?dVal .\n        BIND(CONCAT("\\, "\\, ?dVal) AS ?appVol)\n    }\n          OPTIONAL {\n        ?app crm:P106_is_composed_of ?e . \n        ?e crm:P2_has_type <https://sk.acdh.oeaw.ac.at/types/appellation/place> ;\n                  rdf:value ?eVal .\n        BIND(CONCAT(" ("\\, ?eVal\\, ")") AS ?appPlace)\n    }\n    BIND(CONCAT(COALESCE(?appTitle\\, "")\\, COALESCE(?appPlace\\, "")\\, COALESCE(?appVol\\, "")\\, COALESCE(?appIssue\\, "")\\, COALESCE(?appDate\\, "")) AS ?value)\n},{ ?subject frbroo:R5_has_component ?issues ; crm:P1_is_identified_by/crm:P106_is_composed_of ?appellationTitle . ?appellationTitle crm:P2_has_type  <https://sk.acdh.oeaw.ac.at/types/appellation/title/main> ; rdf:value ?value . },{ ?subject crm:P102_has_title ?title . ?title crm:P2_has_type <https://sk.acdh.oeaw.ac.at/types/title/main> ; rdf:value ?value .  },<http://www.researchspace.org/ontology/displayLabel>,<http://www.w3.org/2000/01/rdf-schema#label>,<http://www.w3.org/2004/02/skos/core#prefLabel>,{ ?subject rdfs:label ?value .}

preferredThumbnails = { ?subject rso:PX_has_main_representation ?representation . ?representation a rso:EX_Digital_Image . ?representation crm:P1_is_identified_by/rso:PX_has_file_name ?fileName. BIND(CONCAT('/proxy/iiif-server/iiif/2/'\\, ?fileName\\, '/full/!640\\,480/0/default.jpg') AS ?value) },{ ?subject rso:PX_has_main_representation ?representation . ?representation a rso:EX_Digital_Image . BIND(REPLACE(STR(?representation)\\, "^.*/(.*)$"\\, "$1") as ?imageID) . BIND(CONCAT('/proxy/iiif-server/iiif/2/'\\, ?imageID\\, '/full/!640\\,480/0/default.jpg') AS ?value) },{ ?subject a rso:EX_Digital_Image . ?subject crm:P1_is_identified_by/rso:PX_has_file_name ?fileName. BIND(CONCAT('/proxy/iiif-server/iiif/2/'\\, ?fileName\\, '/full/!640\\,480/0/default.jpg') AS ?value) },{ ?subject a rso:EX_Digital_Image . BIND(REPLACE(STR(?subject)\\, "^.*/(.*)$"\\, "$1") as ?imageID) . BIND(CONCAT('/proxy/iiif-server/iiif/2/'\\, ?imageID\\, '/full/!640\\,480/0/default.jpg') AS ?value) },{ ?subject crm:P138i_has_representation ?representation . ?representation a rso:EX_Digital_Image . ?representation crm:P1_is_identified_by/rso:PX_has_file_name ?fileName. BIND(CONCAT('/proxy/iiif-server/iiif/2/'\\, ?fileName\\, '/full/!640\\,480/0/default.jpg') AS ?value) },{ ?subject crm:P138i_has_representation ?representation . ?representation a rso:EX_Digital_Image . BIND(REPLACE(STR(?representation)\\, "^.*/(.*)$"\\, "$1") as ?imageID) . BIND(CONCAT('/proxy/iiif-server/iiif/2/'\\, ?imageID\\, '/full/!640\\,480/0/default.jpg') AS ?value) },{ ?subject crm:P138i_has_representation ?representation . ?representation a rso:EX_Digital_Image_Region . ?representation crmdig:L49_is_primary_area_of ?image . ?image crm:P1_is_identified_by/rso:PX_has_file_name ?fileName. ?representation rso:boundingBox ?bb. BIND(STRAFTER(?bb\\, 'xywh=') AS ?boundingBox). BIND(CONCAT('/proxy/iiif-server/iiif/2/'\\, ?fileName\\, '/'\\, ?boundingBox\\, '/!640\\,480/0/default.jpg') AS ?value) },{ ?subject crm:P138i_has_representation ?representation . ?representation a rso:EX_Digital_Image_Region . ?representation crmdig:L49_is_primary_area_of ?image . ?representation rso:boundingBox ?bb. BIND(STRAFTER(?bb\\, 'xywh=') AS ?boundingBox). BIND(REPLACE(STR(?image)\\, "^.*/(.*)$"\\, "$1") as ?imageID) . BIND(CONCAT('/proxy/iiif-server/iiif/2/'\\, ?imageID\\, '/'\\, ?boundingBox\\, '/!640\\,480/0/default.jpg') AS ?value) },<http://www.researchspace.org/ontology/PX_has_main_representation>,<http://www.cidoc-crm.org/cidoc-crm/P138i_has_representation>,{ ?object <http://www.researchspace.org/ontology/PX_has_main_representation> ?subject . BIND(?subject as ?value) }

templateIncludeQuery = PREFIX rso: <http://www.researchspace.org/ontology/> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>  select ?type where { { FILTER(STRSTARTS(STR(??)\\, "http://www.researchspace.org/resource/user/")). BIND(rso:User as ?type). BIND(-1 as ?index) } UNION {?? <http://www.researchspace.org/ontology/PX_object_type>  ?type . BIND(0 AS ?index) } UNION {?? <http://www.cidoc-crm.org/cidoc-crm/P2_has_type>  ?type . BIND(1 AS ?index) } UNION { ?? a ?type . BIND(2 AS ?index) }  UNION { ?? a ?t .  ?t rdfs:subClassOf* ?type . FILTER (?type in (crm:E28_Conceptual_Object\\, crm:E24_Physical_Man-Made_Thing\\, crm:E39_Actor\\, crm:E53_Place\\, crm:E5_Event)). BIND(3 AS ?index) }  UNION { ?? a ?t . ?t rdfs:subClassOf+ ?type . BIND(4 AS ?index) } } ORDER BY ?index
deploymentTitle = SemanticKraus
