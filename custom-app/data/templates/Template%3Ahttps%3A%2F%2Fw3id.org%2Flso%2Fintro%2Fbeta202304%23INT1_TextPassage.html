<!-- template (in by now very small parts) copied from X1_Corpus in CLScor
https://clscor.acdh-dev.oeaw.ac.at/resource/?action=edit&uri=Template%3Ahttps%3A%2F%2Fclsinfra.io%2Fontologies%2FCRMcls%2FX1_Corpus 
2023-04-21
--> 
<ol class="page-breadcrumb">
  <li>
    <mp-link title="Home" url="/">Home</mp-link>
  </li>
  <li class="active">
    <mp-label iri='[[this]]'></mp-label>
  </li>
</ol>

<style>
  #tabs .tab-ontodia {
    margin: 0px;
    padding: 2px 0px 0px;
    width: 100%;
    height: calc(100vh - 300px);
  }
</style>

<div class="page">
	[[#if (ask "ASK { {SELECT * WHERE {?? ?p ?o}LIMIT 1}UNION {SELECT * WHERE {?s ?? ?o}LIMIT 1}UNION {SELECT * WHERE {?s ?p ??}LIMIT 1}UNION{ {SELECT * WHERE {?a ?p ?o. FILTER(??=<Template:http://www.w3.org/2000/01/rdf-schema#Resource> )} LIMIT 1} } }")]]
    <div class='page__header-navtabs'>
      [[> Platform:DefaultResourceHeader]]
    </div>
  	
    <bs-tabs id="tabs" class='page__body-navtabs' unmount-on-exit=true>
      
    <!-- Text Passage Data --> 
      <bs-tab event-key="0" class="tab-overview" title="Text Passage Data">
        <!-- Wording -->
        <!-- Autor, Text, Jahr Entst., Jahr Publ, Jahr Auff.; Position im Text / Position in Publ -->
        <semantic-table
                        query="
SELECT DISTINCT  ?author ?titleValue ?subtitleValue ?creationDate ?publDate ?graph ?performanceDate
WHERE {
  GRAPH ?graph {
   ?? (owl:sameAs | ^owl:sameAs)* ?passage .
      ?text intro:R10_has_Text_Passage ?passage .
      OPTIONAL { ?textCreation (crm:P94_has_created | frbroo:R17_created) ?text . }
      OPTIONAL { ?textCreation  crm:P4_has_time-span / rdfs:label ?creationDate . }
      OPTIONAL { ?author ^crm:P14_carried_out_by ?textCreation . } }
      OPTIONAL { ?text frbroo:R66i_had_a_performed_version_through/crm:P4_has_time-span / rdfs:label ?performanceDate .}
			OPTIONAL { ?text crm:P165i_is_incorporated_in* ?publ . ?publ a frbroo:F24_Publication_Expression ; frbroo:R24i_was_created_through / crm:P4_has_time-span / rdfs:label ?publDate . } 
                               
                               
                               
    # text title(s)
    ?text crm:P102_has_title ?title .
    {                               
    ?title crm:P2_has_type <https://sk.acdh.oeaw.ac.at/types/title/main> .
    }
    UNION
    {                               
    ?title crm:P2_has_type <https://sk.acdh.oeaw.ac.at/types/title/prov> .
    }
    
    ?title rdf:value ?titleValue .
    
    OPTIONAL {
    ?text crm:P102_has_title ?subtitle .
    ?subtitle crm:P2_has_type <https://sk.acdh.oeaw.ac.at/types/title/sub> ;
        rdf:value ?subtitleValue .
    }
    
  }
                               
                               "
                        column-configuration='[
    {"variableName": "author", "displayName": "Author"}, 
    {"displayName": "Title", "cellTemplate": "{{> title}}"}, 
    {"displayName": "Date", "cellTemplate": "{{> date}}"},
    {"variableName": "graph", "displayName": "Source Graph"}
    
  ]'
  options='{"showFilter": false}'
                        >
          <template id="title">
            {{#if subtitleValue}}{{titleValue.value}}<br/>{{subtitleValue.value}}{{else}}{{titleValue.value}}{{/if}}
          </template>
          <template id="date">
            {{#if creationDate}}created {{creationDate.value}}<br/>{{/if}}
						{{#if publDate}}published {{publDate.value}}<br/>{{/if}}
            {{#if performanceDate}}first performed / recited {{performanceDate.value}}<br/>{{/if}}
          </template>
          </semantic-table>
        <!-- Publ-Kontext, nun inkl. Textpassage -->
        <!-- Outgoing: Intert. / Mention (IF drumherum) inkl: source, Verweisziel -->
        <!-- Incoming: bloÃŸ Text -->
        
        
        
        
        
        </bs-tab>

        <!-- IDs, Links - Table -->
  <bs-tab title="Entity IDs" event-key="10">
    <semantic-table 
query="
prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>
prefix crm: <http://www.cidoc-crm.org/cidoc-crm/>
prefix owl: <http://www.w3.org/2002/07/owl#>
     
SELECT ?passage ?id ?idValue ?idURL ?idType ?graph
WHERE {
GRAPH ?graph {
?? (owl:sameAs | ^owl:sameAs)* ?passage .
?passage crm:P1_is_identified_by ?id .
?id rdf:value ?idValue .
    OPTIONAL { 
        FILTER (CONTAINS(STR(?idValue), 'http'))
        BIND(?idValue AS ?idURL)
    }
?id rdf:type crm:E42_Identifier .
optional {
  #type
  ?id crm:P2_has_type ?idType .
    }
  }
}
     "
column-configuration='[
{"variableName": "idValue", "displayName": "ID", "cellTemplate": "{{> idValue}}"},
{"variableName": "idType", "displayName": "ID Type"}, 
{"variableName": "graph", "displayName": "Source Graph"}
]'
>

<template id="idValue">
{{#if idURL}}
<a href="{{idURL.value}}">{{idValue.value}}</a>
{{else}}
<div>{{idValue.value}}</div>
{{/if}}
</template>

</semantic-table>
</bs-tab>
  
      <!-- Source -->
      <bs-tab event-key="1" title="Source">
        [[> Platform:SourceStatements]]
      </bs-tab>
      
      <bs-tab event-key="11" class="tab-ontodia" title="Knowledge Graph">
        <ontodia id='ontodia' hide-toolbar=true hide-panels=true hide-scroll-bars=true hide-navigation-confirmation=true auto-zoom=true settings=nostats iri='[[this]]'></ontodia>
      </bs-tab>
      
    
    </bs-tabs>
  
  [[else]]
  <div class='page__body'>
    <p>
      It seems that no entity with IRI <code>"[[this]]"</code> in any subject, predicate or object position is known in the knowledge graph. Also no static application page with this identifier can be found.
    </p>
    <p>
      Click on the edit button (<i class="fa fa-pencil"></i>) in the top right of this page (<i>only visibile if the respective ACL permissions are being granted to you</i>) to create a new, static application page with this identifier.
    </p>
  </div>
  [[/if]]
</div>